# LanLink è·¨å¹³å°ç¼–è¯‘æŒ‡å—

## ğŸ¯ æ¦‚è¿°

Go è¯­è¨€æ”¯æŒ**äº¤å‰ç¼–è¯‘**ï¼Œæ‚¨å¯ä»¥åœ¨ Windows ä¸Šç¼–è¯‘å‡º Mac å’Œ Linux ç‰ˆæœ¬ï¼Œæ— éœ€æ‹¥æœ‰å¯¹åº”çš„è®¾å¤‡ã€‚

---

## ğŸš€ ä¸€é”®ç¼–è¯‘æ‰€æœ‰å¹³å°

### ä½¿ç”¨ build.cmdï¼ˆæ¨èï¼‰

**åœ¨ Windows ä¸Šè¿è¡Œï¼š**

```batch
build.cmd
```

**ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼š**
1. âœ… Windows (amd64) - `lanlink-windows-amd64.exe`
2. âœ… Linux (amd64) - `lanlink-linux-amd64`
3. âœ… Mac Intel (amd64) - `lanlink-mac-amd64`
4. âœ… Mac Apple Silicon (arm64) - `lanlink-mac-arm64`

**è¾“å‡ºç›®å½•ï¼š** `dist/`

**æ‰§è¡Œè¿‡ç¨‹ï¼š**
```
============================================
  LanLink å…¨å¹³å°ç¼–è¯‘
============================================

[1/4] ç¼–è¯‘ Windows (amd64)...
  âˆš Windows ç¼–è¯‘æˆåŠŸ

[2/4] ç¼–è¯‘ Linux (amd64)...
  âˆš Linux ç¼–è¯‘æˆåŠŸ

[3/4] ç¼–è¯‘ Mac Intel (amd64)...
  âˆš Mac Intel ç¼–è¯‘æˆåŠŸ

[4/4] ç¼–è¯‘ Mac Apple Silicon (arm64)...
  âˆš Mac Apple Silicon ç¼–è¯‘æˆåŠŸ

============================================
  ç¼–è¯‘å®Œæˆï¼
============================================

è¾“å‡ºç›®å½•: dist\

lanlink-linux-amd64
lanlink-mac-amd64
lanlink-mac-arm64
lanlink-windows-amd64.exe
```

---

## ğŸ”§ æ‰‹åŠ¨ç¼–è¯‘ç‰¹å®šå¹³å°

### Windows PowerShell

```powershell
# Linux
$env:GOOS="linux"; $env:GOARCH="amd64"
go build -o dist/lanlink-linux-amd64

# Mac Intel
$env:GOOS="darwin"; $env:GOARCH="amd64"
go build -o dist/lanlink-mac-amd64

# Mac Apple Silicon (M1/M2/M3)
$env:GOOS="darwin"; $env:GOARCH="arm64"
go build -o dist/lanlink-mac-arm64

# Windows
$env:GOOS="windows"; $env:GOARCH="amd64"
go build -o dist/lanlink-windows-amd64.exe

# é‡ç½®ç¯å¢ƒå˜é‡
$env:GOOS=""; $env:GOARCH=""
```

### Windows CMD

```batch
REM Linux
set GOOS=linux
set GOARCH=amd64
go build -o dist\lanlink-linux-amd64

REM Mac Intel
set GOOS=darwin
set GOARCH=amd64
go build -o dist\lanlink-mac-amd64

REM Mac Apple Silicon
set GOOS=darwin
set GOARCH=arm64
go build -o dist\lanlink-mac-arm64

REM é‡ç½®
set GOOS=
set GOARCH=
```

### Linux/Mac Bash

```bash
# Windows
GOOS=windows GOARCH=amd64 go build -o dist/lanlink-windows-amd64.exe

# Linux
GOOS=linux GOARCH=amd64 go build -o dist/lanlink-linux-amd64

# Mac Intel
GOOS=darwin GOARCH=amd64 go build -o dist/lanlink-mac-amd64

# Mac Apple Silicon
GOOS=darwin GOARCH=arm64 go build -o dist/lanlink-mac-arm64
```

---

## ğŸ“¦ ä¼˜åŒ–ç¼–è¯‘é€‰é¡¹

### å‡å°æ–‡ä»¶å¤§å°

æ·»åŠ ç¼–è¯‘å‚æ•°ï¼š

```bash
go build -ldflags="-s -w" -o lanlink
```

**å‚æ•°è¯´æ˜ï¼š**
- `-s` - å»é™¤ç¬¦å·è¡¨
- `-w` - å»é™¤ DWARF è°ƒè¯•ä¿¡æ¯

**æ•ˆæœï¼š** æ–‡ä»¶å¤§å°å‡å°‘çº¦ 30-40%

### ç¤ºä¾‹å¯¹æ¯”

| é€‰é¡¹ | Windows | Linux | Mac |
|------|---------|-------|-----|
| é»˜è®¤ | 5.2 MB | 5.1 MB | 5.0 MB |
| `-ldflags="-s -w"` | 3.6 MB | 3.5 MB | 3.4 MB |

---

## ğŸŒ æ”¯æŒçš„å¹³å°å’Œæ¶æ„

### å¸¸ç”¨å¹³å°

| OS | æ¶æ„ | GOOS | GOARCH | è¯´æ˜ |
|---|------|------|--------|------|
| Windows | x64 | windows | amd64 | æ‰€æœ‰ç°ä»£ Windows PC |
| Linux | x64 | linux | amd64 | å¤§éƒ¨åˆ† Linux å‘è¡Œç‰ˆ |
| Mac Intel | x64 | darwin | amd64 | 2020 å¹´å‰çš„ Mac |
| Mac Mç³»åˆ— | ARM64 | darwin | arm64 | M1/M2/M3 èŠ¯ç‰‡ |

### å…¶ä»–å¹³å°ï¼ˆå¯é€‰ï¼‰

```bash
# Linux ARM (æ ‘è“æ´¾ç­‰)
GOOS=linux GOARCH=arm64 go build -o lanlink-linux-arm64

# FreeBSD
GOOS=freebsd GOARCH=amd64 go build -o lanlink-freebsd-amd64

# Windows ARM (Surface Pro X ç­‰)
GOOS=windows GOARCH=arm64 go build -o lanlink-windows-arm64.exe
```

---

## ğŸ“¤ ä¼ è¾“åˆ°ç›®æ ‡è®¾å¤‡

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ SCPï¼ˆæ¨èï¼‰

**ä¼ è¾“åˆ° Linuxï¼š**
```bash
scp dist/lanlink-linux-amd64 user@linux-ip:~/lanlink
```

**ä¼ è¾“åˆ° Macï¼š**
```bash
scp dist/lanlink-mac-arm64 user@mac-ip:~/lanlink
```

### æ–¹å¼äºŒï¼šä½¿ç”¨å…±äº«æ–‡ä»¶å¤¹

1. å¯ç”¨ Windows æ–‡ä»¶å…±äº«
2. åœ¨ç›®æ ‡è®¾å¤‡è®¿é—® `\\windows-pc\share\lanlink-xxx`
3. å¤åˆ¶æ–‡ä»¶

### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Uç›˜/ç§»åŠ¨ç¡¬ç›˜

ç›´æ¥å¤åˆ¶ `dist/` ç›®å½•åˆ°ç§»åŠ¨è®¾å¤‡

### æ–¹å¼å››ï¼šä½¿ç”¨è„šæœ¬è‡ªåŠ¨ä¼ è¾“

é¡¹ç›®å·²åŒ…å«ä¼ è¾“è„šæœ¬ï¼š`scripts/transfer-to-mac.sh`

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# åœ¨ Windows çš„ Git Bash æˆ– WSL ä¸­è¿è¡Œ
./scripts/transfer-to-mac.sh user@mac-ip
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹ Mac çš„ CPU æ¶æ„
2. é€‰æ‹©å¯¹åº”çš„ç¼–è¯‘æ–‡ä»¶
3. é€šè¿‡ SSH ä¼ è¾“åˆ° Mac
4. æç¤ºåœ¨ Mac ä¸Šçš„å®‰è£…å‘½ä»¤

---

## ğŸ Mac å®‰è£…å’Œä½¿ç”¨

### åœ¨ Mac ä¸Šæ¥æ”¶æ–‡ä»¶å

```bash
# 1. èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x ~/lanlink

# 2. ç§»é™¤éš”ç¦»å±æ€§ï¼ˆMac å®‰å…¨é™åˆ¶ï¼‰
sudo xattr -d com.apple.quarantine ~/lanlink

# 3. æµ‹è¯•è¿è¡Œ
sudo ~/lanlink version

# 4. å®‰è£…åˆ°ç³»ç»Ÿ
sudo ~/lanlink install

# 5. éªŒè¯
lanlink version

# 6. å®‰è£…ä¸ºæœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
sudo lanlink service install

# 7. å¯åŠ¨æœåŠ¡
sudo lanlink service start

# 8. æŸ¥çœ‹çŠ¶æ€
lanlink status
lanlink list
```

---

## ğŸ” éªŒè¯ç¼–è¯‘ç»“æœ

### æ£€æŸ¥æ–‡ä»¶ä¿¡æ¯

**Windowsï¼š**
```powershell
# æŸ¥çœ‹æ–‡ä»¶
Get-ChildItem dist/ | Select-Object Name, Length, LastWriteTime

# æŸ¥çœ‹æ–‡ä»¶ç±»å‹
file dist/lanlink-mac-arm64  # éœ€è¦å®‰è£… Git Bash æˆ– WSL
```

**åœ¨ç›®æ ‡å¹³å°éªŒè¯ï¼š**
```bash
# Linux/Mac ä¸ŠæŸ¥çœ‹æ–‡ä»¶ä¿¡æ¯
file lanlink-mac-arm64
# è¾“å‡º: Mach-O 64-bit executable arm64

file lanlink-linux-amd64
# è¾“å‡º: ELF 64-bit LSB executable, x86-64

# æŸ¥çœ‹æ–‡ä»¶å¤§å°
ls -lh lanlink-*
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ç»Ÿä¸€çš„æ„å»ºæµç¨‹

```batch
REM 1. æ¸…ç†æ—§æ–‡ä»¶
del /q dist\* 2>nul

REM 2. è¿è¡Œç¼–è¯‘
build.cmd

REM 3. éªŒè¯æ–‡ä»¶
dir dist\

REM 4. æ‰“åŒ…ï¼ˆå¯é€‰ï¼‰
powershell Compress-Archive -Path dist\* -DestinationPath lanlink-v1.0.0-all.zip
```

### 2. ç‰ˆæœ¬å·ç®¡ç†

ä¿®æ”¹ `cli/version.go` è®¾ç½®ç‰ˆæœ¬ï¼š

```go
const (
    Version   = "1.0.0"
    BuildDate = "2024-11-27"
)
```

### 3. GitHub Actions è‡ªåŠ¨ç¼–è¯‘

é¡¹ç›®å·²åŒ…å« `.github/workflows/release.yml`ï¼Œæ¨é€æ ‡ç­¾æ—¶è‡ªåŠ¨ç¼–è¯‘ï¼š

```bash
# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag -a v1.0.0 -m "Release v1.0.0"

# æ¨é€æ ‡ç­¾
git push origin v1.0.0

# GitHub Actions è‡ªåŠ¨ç¼–è¯‘å¹¶å‘å¸ƒæ‰€æœ‰å¹³å°ç‰ˆæœ¬
```

---

## ğŸ“‹ å¹³å°ä½¿ç”¨å¯¹ç…§è¡¨

| å¹³å° | ç¼–è¯‘å‘½ä»¤ | æ–‡ä»¶å | ä¼ è¾“æ–¹å¼ | å®‰è£…å‘½ä»¤ |
|------|---------|--------|---------|---------|
| Windows | `build.cmd` | `lanlink-windows-amd64.exe` | ç›´æ¥ä½¿ç”¨ | `.\lanlink.exe install` |
| Linux | `build.cmd` | `lanlink-linux-amd64` | SCP/Uç›˜ | `sudo ./lanlink install` |
| Mac Intel | `build.cmd` | `lanlink-mac-amd64` | SCP/Uç›˜ | `sudo ./lanlink install` |
| Mac M1/M2/M3 | `build.cmd` | `lanlink-mac-arm64` | SCP/Uç›˜ | `sudo ./lanlink install` |

---

## ğŸ‰ æ€»ç»“

âœ… **å¯ä»¥åœ¨ Windows ä¸Šç¼–è¯‘ Mac ç‰ˆæœ¬** - Go è¯­è¨€å®Œå…¨æ”¯æŒäº¤å‰ç¼–è¯‘  
âœ… **ä¸€é”®ç¼–è¯‘æ‰€æœ‰å¹³å°** - è¿è¡Œ `build.cmd` å³å¯  
âœ… **Mac ä½¿ç”¨æ–¹å¼ä¸ Linux ç›¸åŒ** - éƒ½æ˜¯ Unix ç³»ç»Ÿ  
âœ… **è‡ªåŠ¨åŒ–éƒ¨ç½²** - GitHub Actions è‡ªåŠ¨ç¼–è¯‘å‘å¸ƒ  

---

**ç°åœ¨æ‚¨å¯ä»¥ç¼–è¯‘ä¸€æ¬¡ï¼Œåœ¨æ‰€æœ‰å¹³å°ä½¿ç”¨äº†ï¼** ğŸš€

